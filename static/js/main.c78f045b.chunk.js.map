{"version":3,"sources":["pages/Home/index.tsx","components/loader/IfcLoader.js","components/IFCViewer/index.tsx","assets/images/logo.jpg","components/ViewData/index.tsx","components/ViewerRender/index.tsx","pages/ColaborationBim/index.tsx","routes.tsx","App.tsx","services/adalConfig.ts","index.tsx"],"names":["Home","to","ifcAPI","WebIFC","display","ifcLoader","manager","modelID","mapFaceindexID","mapIDFaceindex","mapIDGeometry","selectedObjects","highlightMaterial","MeshBasicMaterial","color","depthTest","side","DoubleSide","url","onLoad","onProgress","onError","scope","this","loader","FileLoader","setPath","path","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","buffer","a","parse","console","error","itemError","SetWasmPath","faceIndex","index","parseInt","items","geometry","pickTransparent","setupVisibility","i","length","trueIndex","array","visible","getAttribute","expressIds","mesh","state","scene","faceIndicesArray","map","id","concat","apply","forEach","setFaceDisplay","attributes","needsUpdate","updateTransparency","geoIndex","setFaceAttribute","r","g","b","h","attribute","setX","zeros","Float32Array","count","setAttribute","BufferAttribute","slice","fill","_transparentMesh","setupTransparency","transparentMesh","clone","transparentMaterials","materialTransparentDisplay","shader","vertexShader","replace","fragmentShader","material","mat","newMat","transparent","onBeforeCompile","push","add","elementID","all","recursive","properties","GetLine","propSetIds","getAllRelatedItemsOfType","hasPropertySets","typeId","hasType","ifcProjectId","GetLineIDsWithType","get","ifcProject","getAllSpatialChildren","spatialElement","expressID","spatialChildrenID","hasSpatialChildren","hasChildren","child","type","relation","relatedProperty","lines","IDs","size","relID","rel","relatedItems","foundElement","Array","isArray","item","value","includes","element","ele","loadAllGeometry","generateAllGeometriesByMaterial","storeFaceindicesByExpressIDs","getMaterialsAndGeometries","saveAllPlacedGeometriesByMaterial","savePlacedGeometryByMaterial","getBufferGeometry","getMeshMatrix","ifcGeometryToBuffer","extractVertexData","saveGeometryByMaterial","createMaterial","initializeGeometryByMaterial","materialCustomDisplay","newMaterial","indices","lastIndex","geometryByMaterials","col","Color","x","y","z","MeshLambertMaterial","w","opacity","placedGeometry","productId","currentGeometry","vertexData","vertices","normals","isNormalData","indexData","BufferGeometry","setIndex","matrix","Matrix4","fromArray","GetGeometry","geometryExpressID","verts","GetVertexArray","GetVertexData","GetVertexDataSize","GetIndexArray","GetIndexData","GetIndexDataSize","computeVertexNormals","flatTransformation","applyMatrix4","flatMeshes","LoadAllGeometry","flatMesh","placedGeometries","geometries","j","materials","totalFaceCount","currentGeometries","BufferGeometryUtils","mergeBufferGeometries","globalIndex","previous","current","faceIndices","allGeometry","Mesh","undefined","wasmModule","Init","data","Uint8Array","OpenModel","Loader","IFCViewer","mouseEvent","ifcURL","useThree","camera","useState","ifcMesh","setIfcMesh","previousSelection","setPreviousSelection","useEffect","button","mouse","Vector2","clientX","window","innerWidth","clientY","innerHeight","raycaster","Raycaster","setFromCamera","intersected","intersectObjects","children","setItemsVisibility","pickItem","getExpressId","Number","getSpatialStructure","log","getItemProperties","selectObject","Stats","showPanel","className","OrbitControls","PerspectiveCamera","position","Vector3","intensity","setWasmPath","ViewData","src","alt","style","zIndex","width","top","left","ViewerRender","setMouseEvent","setIfcUrl","readOnly","onChange","event","objectURL","URL","createObjectURL","target","files","onDoubleClick","dpr","Math","min","devicePixelRatio","gl","antialias","mode","fov","near","far","aspect","onCreated","setSize","background","ColaborationBim","Routes","exact","component","App","endpoint","adalConfig","cacheLocation","clientId","endpoints","api","postLogoutRedirectUri","location","origin","tenant","adalContext","authContext","AuthenticationContext","adalGetToken","logOut","runWithAdal","AuthContext","GetToken","then","token","sp","setup","headers","Authorization","rootDiv","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.c78f045b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Home: React.FC = () => {\r\n  return (\r\n    <div>\r\n      <h1>Bem vindo a plataforma de colaboração BIM da A.Yoshii</h1>\r\n      <Link to=\"/colaboration\">\r\n        <button> COLABORATION </button>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","// import { IfcAPI } from 'web-ifc/web-ifc-api';\r\nimport * as WebIFC from 'web-ifc/web-ifc-api';\r\nimport { BufferGeometryUtils } from 'three/examples/jsm/utils/BufferGeometryUtils';\r\nimport {\r\n  FileLoader,\r\n  Loader,\r\n  Mesh,\r\n  Color,\r\n  MeshBasicMaterial,\r\n  MeshLambertMaterial,\r\n  DoubleSide,\r\n  Matrix4,\r\n  BufferGeometry,\r\n  BufferAttribute\r\n} from 'three/build/three.module';\r\n\r\nconst ifcAPI = new WebIFC.IfcAPI();\r\nconst display = {\r\n  r: 'r',\r\n  g: 'g',\r\n  b: 'b',\r\n  a: 'a',\r\n  highlighted: 'h'\r\n};\r\n\r\nclass IFCLoader extends Loader {\r\n  constructor(manager) {\r\n    super(manager);\r\n    this.modelID = 0;\r\n    this.mapFaceindexID = {};\r\n    this.mapIDFaceindex = {};\r\n    this.mapIDGeometry = {};\r\n    this.selectedObjects = [];\r\n    this.highlightMaterial = new MeshBasicMaterial({\r\n      color: 0xff0000,\r\n      depthTest: false,\r\n      side: DoubleSide\r\n    });\r\n  }\r\n\r\n  load(url, onLoad, onProgress, onError) {\r\n    const scope = this;\r\n\r\n    const loader = new FileLoader(scope.manager);\r\n    loader.setPath(scope.path);\r\n    loader.setResponseType('arraybuffer');\r\n    loader.setRequestHeader(scope.requestHeader);\r\n    loader.setWithCredentials(scope.withCredentials);\r\n    loader.load(\r\n      url,\r\n      async function (buffer) {\r\n        try {\r\n          onLoad(await scope.parse(buffer));\r\n        } catch (e) {\r\n          if (onError) {\r\n            onError(e);\r\n          } else {\r\n            console.error(e);\r\n          }\r\n\r\n          scope.manager.itemError(url);\r\n        }\r\n      },\r\n      onProgress,\r\n      onError\r\n    );\r\n  }\r\n\r\n  setWasmPath(path) {\r\n    ifcAPI.SetWasmPath(path);\r\n  }\r\n\r\n  getExpressId(faceIndex) {\r\n    for (let index in this.mapFaceindexID) {\r\n      if (parseInt(index) > faceIndex) return this.mapFaceindexID[index];\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  pickItem(items, geometry, pickTransparent = true) {\r\n    this.setupVisibility(geometry);\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      const index = items[i].faceIndex;\r\n      const trueIndex = geometry.index.array[index * 3];\r\n      const visible = geometry.getAttribute(display.a).array[trueIndex];\r\n      if (pickTransparent && visible !== 0) return items[i];\r\n      else if (visible === 1) return items[i];\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  setItemsVisibility(expressIds, mesh, state, scene) {\r\n    const geometry = mesh.geometry;\r\n    this.setupVisibility(geometry);\r\n\r\n    const faceIndicesArray = expressIds.map((id) => this.mapIDFaceindex[id]);\r\n    var faceIndices = [].concat.apply([], faceIndicesArray);\r\n    faceIndices.forEach((faceIndex) => this.setFaceDisplay(geometry, faceIndex, state));\r\n\r\n    geometry.attributes[display.r].needsUpdate = true;\r\n    geometry.attributes[display.g].needsUpdate = true;\r\n    geometry.attributes[display.b].needsUpdate = true;\r\n    geometry.attributes[display.a].needsUpdate = true;\r\n    geometry.attributes[display.highlighted].needsUpdate = true;\r\n\r\n    if (state.a !== 1) this.updateTransparency(mesh, scene, state);\r\n  }\r\n\r\n  setFaceDisplay(geometry, index, state) {\r\n    const geoIndex = geometry.index.array;\r\n    this.setFaceAttribute(geometry, display.r, state.r, index, geoIndex);\r\n    this.setFaceAttribute(geometry, display.g, state.g, index, geoIndex);\r\n    this.setFaceAttribute(geometry, display.b, state.b, index, geoIndex);\r\n    this.setFaceAttribute(geometry, display.a, state.a, index, geoIndex);\r\n    this.setFaceAttribute(geometry, display.highlighted, state.h, index, geoIndex);\r\n  }\r\n\r\n  setFaceAttribute(geometry, attribute, state, index, geoIndex) {\r\n    geometry.attributes[attribute].setX(geoIndex[3 * index], state);\r\n    geometry.attributes[attribute].setX(geoIndex[3 * index + 1], state);\r\n    geometry.attributes[attribute].setX(geoIndex[3 * index + 2], state);\r\n  }\r\n\r\n  setupVisibility(geometry) {\r\n    if (!geometry.attributes[display.r]) {\r\n      const zeros = new Float32Array(geometry.getAttribute('position').count);\r\n      geometry.setAttribute(display.r, new BufferAttribute(zeros.slice(), 1));\r\n      geometry.setAttribute(display.g, new BufferAttribute(zeros.slice(), 1));\r\n      geometry.setAttribute(display.b, new BufferAttribute(zeros.slice(), 1));\r\n      geometry.setAttribute(display.a, new BufferAttribute(zeros.slice().fill(1), 1));\r\n      geometry.setAttribute(display.highlighted, new BufferAttribute(zeros, 1));\r\n    }\r\n  }\r\n\r\n  updateTransparency(mesh, scene, state) {\r\n    if (!mesh.geometry._transparentMesh) this.setupTransparency(mesh, scene);\r\n  }\r\n\r\n  setupTransparency(mesh, scene) {\r\n    const transparentMesh = mesh.clone();\r\n\r\n    const transparentMaterials = [];\r\n    transparentMesh.material.forEach((mat) => {\r\n      const newMat = mat.clone();\r\n      newMat.transparent = true;\r\n      // newMat.depthTest = false;\r\n      newMat.onBeforeCompile = materialTransparentDisplay;\r\n      transparentMaterials.push(newMat);\r\n    });\r\n    transparentMesh.material = transparentMaterials;\r\n\r\n    scene.add(transparentMesh);\r\n    mesh.geometry._transparentMesh = transparentMesh;\r\n\r\n    function materialTransparentDisplay(shader) {\r\n      shader.vertexShader = `\r\n\t\t\tattribute float sizes;\r\n\t\t\tattribute float r;\r\n\t\t\tattribute float g;\r\n\t\t\tattribute float b;\r\n\t\t\tattribute float a;\r\n\t\t\tattribute float h;\r\n\t\t\tvarying float vr;\r\n\t\t\tvarying float vg;\r\n\t\t\tvarying float vb;\r\n\t\t\tvarying float va;\r\n\t\t\tvarying float vh;\r\n\t\t  ${shader.vertexShader}`.replace(\r\n        `#include <fog_vertex>`,\r\n        `#include <fog_vertex>\r\n\t\t\t  vr = r;\r\n\t\t\t  vg = g;\r\n\t\t\t  vb = b;\r\n\t\t\t  va = a;\r\n\t\t\t  vh = h;\r\n\t\t\t`\r\n      );\r\n      shader.fragmentShader = `\r\n\t\t\tvarying float vr;\r\n\t\t\tvarying float vg;\r\n\t\t\tvarying float vb;\r\n\t\t\tvarying float va;\r\n\t\t\tvarying float vh;\r\n\t\t  ${shader.fragmentShader}`.replace(\r\n        `\tvec4 diffuseColor = vec4( diffuse, opacity );`,\r\n        `\r\n\t\t\t  vec4 diffuseColor = vec4( diffuse, opacity );\r\n\t\t\t  if(vh > 0.0){\r\n\t\t\t\tif (va == 0.0) discard;\r\n\t\t\t\tdiffuseColor = vec4( vr, vg, vb, va );\r\n\t\t\t  } else discard;\r\n\t\t\t  `\r\n      );\r\n    }\r\n  }\r\n\r\n  getItemProperties(elementID, all = false, recursive = false) {\r\n    const properties = ifcAPI.GetLine(this.modelID, elementID, recursive);\r\n\r\n    if (all) {\r\n      const propSetIds = this.getAllRelatedItemsOfType(\r\n        elementID,\r\n        WebIFC.IFCRELDEFINESBYPROPERTIES,\r\n        'RelatedObjects',\r\n        'RelatingPropertyDefinition'\r\n      );\r\n      properties.hasPropertySets = propSetIds.map((id) =>\r\n        ifcAPI.GetLine(this.modelID, id, recursive)\r\n      );\r\n\r\n      const typeId = this.getAllRelatedItemsOfType(\r\n        elementID,\r\n        WebIFC.IFCRELDEFINESBYTYPE,\r\n        'RelatedObjects',\r\n        'RelatingType'\r\n      );\r\n      properties.hasType = typeId.map((id) => ifcAPI.GetLine(this.modelID, id, recursive));\r\n    }\r\n\r\n    // properties.type = properties.constructor.name;\r\n    return properties;\r\n  }\r\n\r\n  getSpatialStructure() {\r\n    let lines = ifcAPI.GetLineIDsWithType(this.modelID, WebIFC.IFCPROJECT);\r\n    let ifcProjectId = lines.get(0);\r\n    let ifcProject = ifcAPI.GetLine(this.modelID, ifcProjectId);\r\n    this.getAllSpatialChildren(ifcProject);\r\n    return ifcProject;\r\n  }\r\n\r\n  getAllSpatialChildren(spatialElement) {\r\n    const id = spatialElement.expressID;\r\n    const spatialChildrenID = this.getAllRelatedItemsOfType(\r\n      id,\r\n      WebIFC.IFCRELAGGREGATES,\r\n      'RelatingObject',\r\n      'RelatedObjects'\r\n    );\r\n    spatialElement.hasSpatialChildren = spatialChildrenID.map((id) =>\r\n      ifcAPI.GetLine(this.modelID, id, false)\r\n    );\r\n    spatialElement.hasChildren = this.getAllRelatedItemsOfType(\r\n      id,\r\n      WebIFC.IFCRELCONTAINEDINSPATIALSTRUCTURE,\r\n      'RelatingStructure',\r\n      'RelatedElements'\r\n    );\r\n    spatialElement.hasSpatialChildren.forEach((child) => this.getAllSpatialChildren(child));\r\n  }\r\n\r\n  getAllRelatedItemsOfType(elementID, type, relation, relatedProperty) {\r\n    const lines = ifcAPI.GetLineIDsWithType(this.modelID, type);\r\n    const IDs = [];\r\n\r\n    for (let i = 0; i < lines.size(); i++) {\r\n      const relID = lines.get(i);\r\n      const rel = ifcAPI.GetLine(this.modelID, relID);\r\n      const relatedItems = rel[relation];\r\n      let foundElement = false;\r\n\r\n      if (Array.isArray(relatedItems)) {\r\n        const values = relatedItems.map((item) => item.value);\r\n        foundElement = values.includes(elementID);\r\n      } else foundElement = relatedItems.value === elementID;\r\n\r\n      if (foundElement) {\r\n        const element = rel[relatedProperty];\r\n        if (!Array.isArray(element)) IDs.push(element.value);\r\n        else element.forEach((ele) => IDs.push(ele.value));\r\n      }\r\n    }\r\n    return IDs;\r\n  }\r\n\r\n  async parse(buffer) {\r\n    const geometryByMaterials = {};\r\n    const mapFaceindexID = this.mapFaceindexID;\r\n    const mapIDFaceindex = this.mapIDFaceindex;\r\n\r\n    if (ifcAPI.wasmModule === undefined) {\r\n      await ifcAPI.Init();\r\n    }\r\n\r\n    const data = new Uint8Array(buffer);\r\n    this.modelID = ifcAPI.OpenModel('example.ifc', data);\r\n    return loadAllGeometry(this.modelID);\r\n\r\n    function loadAllGeometry(modelID) {\r\n      saveAllPlacedGeometriesByMaterial(modelID);\r\n      return generateAllGeometriesByMaterial();\r\n    }\r\n\r\n    function generateAllGeometriesByMaterial() {\r\n      const { materials, geometries } = getMaterialsAndGeometries();\r\n      const allGeometry = BufferGeometryUtils.mergeBufferGeometries(geometries, true);\r\n      storeFaceindicesByExpressIDs();\r\n      return new Mesh(allGeometry, materials);\r\n    }\r\n\r\n    function storeFaceindicesByExpressIDs() {\r\n      let previous = 0;\r\n\r\n      for (let current in mapFaceindexID) {\r\n        const id = mapFaceindexID[current];\r\n\r\n        var faceIndices = [];\r\n        for (let j = previous; j < current; j++) {\r\n          faceIndices.push(j);\r\n        }\r\n\r\n        previous = current;\r\n\r\n        if (!mapIDFaceindex[id]) mapIDFaceindex[id] = [];\r\n        mapIDFaceindex[id].push(...faceIndices);\r\n      }\r\n    }\r\n\r\n    function getMaterialsAndGeometries() {\r\n      const materials = [];\r\n      const geometries = [];\r\n      let totalFaceCount = 0;\r\n\r\n      for (let i in geometryByMaterials) {\r\n        materials.push(geometryByMaterials[i].material);\r\n        const currentGeometries = geometryByMaterials[i].geometry;\r\n        geometries.push(BufferGeometryUtils.mergeBufferGeometries(currentGeometries));\r\n\r\n        for (let j in geometryByMaterials[i].indices) {\r\n          const globalIndex = parseInt(j, 10) + parseInt(totalFaceCount, 10);\r\n          mapFaceindexID[globalIndex] = geometryByMaterials[i].indices[j];\r\n        }\r\n\r\n        totalFaceCount += geometryByMaterials[i].lastIndex;\r\n      }\r\n\r\n      return { materials, geometries };\r\n    }\r\n\r\n    function saveAllPlacedGeometriesByMaterial(modelID) {\r\n      const flatMeshes = ifcAPI.LoadAllGeometry(modelID);\r\n\r\n      for (let i = 0; i < flatMeshes.size(); i++) {\r\n        const flatMesh = flatMeshes.get(i);\r\n        const productId = flatMesh.expressID;\r\n        const placedGeometries = flatMesh.geometries;\r\n\r\n        for (let j = 0; j < placedGeometries.size(); j++) {\r\n          savePlacedGeometryByMaterial(modelID, placedGeometries.get(j), productId);\r\n        }\r\n      }\r\n    }\r\n\r\n    function savePlacedGeometryByMaterial(modelID, placedGeometry, productId) {\r\n      const geometry = getBufferGeometry(modelID, placedGeometry);\r\n      geometry.computeVertexNormals();\r\n      const matrix = getMeshMatrix(placedGeometry.flatTransformation);\r\n      geometry.applyMatrix4(matrix);\r\n      saveGeometryByMaterial(geometry, placedGeometry, productId);\r\n    }\r\n\r\n    function getBufferGeometry(modelID, placedGeometry) {\r\n      const geometry = ifcAPI.GetGeometry(modelID, placedGeometry.geometryExpressID);\r\n      const verts = ifcAPI.GetVertexArray(geometry.GetVertexData(), geometry.GetVertexDataSize());\r\n      const indices = ifcAPI.GetIndexArray(geometry.GetIndexData(), geometry.GetIndexDataSize());\r\n      return ifcGeometryToBuffer(verts, indices);\r\n    }\r\n\r\n    function getMeshMatrix(matrix) {\r\n      const mat = new Matrix4();\r\n      mat.fromArray(matrix);\r\n      return mat;\r\n    }\r\n\r\n    function ifcGeometryToBuffer(vertexData, indexData) {\r\n      const geometry = new BufferGeometry();\r\n      const { vertices, normals } = extractVertexData(vertexData);\r\n      geometry.setAttribute('position', new BufferAttribute(new Float32Array(vertices), 3));\r\n      geometry.setAttribute('normal', new BufferAttribute(new Float32Array(normals), 3));\r\n      geometry.setIndex(new BufferAttribute(indexData, 1));\r\n      return geometry;\r\n    }\r\n\r\n    function extractVertexData(vertexData) {\r\n      const vertices = [];\r\n      const normals = [];\r\n      let isNormalData = false;\r\n\r\n      for (let i = 0; i < vertexData.length; i++) {\r\n        isNormalData ? normals.push(vertexData[i]) : vertices.push(vertexData[i]);\r\n        if ((i + 1) % 3 === 0) isNormalData = !isNormalData;\r\n      }\r\n\r\n      return { vertices, normals };\r\n    }\r\n\r\n    function saveGeometryByMaterial(geometry, placedGeometry, productId) {\r\n      const color = placedGeometry.color;\r\n      const id = `${color.x}${color.y}${color.z}${color.w}`;\r\n      createMaterial(id, color);\r\n      const currentGeometry = geometryByMaterials[id];\r\n      currentGeometry.geometry.push(geometry);\r\n      currentGeometry.lastIndex += geometry.index.count / 3;\r\n      currentGeometry.indices[currentGeometry.lastIndex] = productId;\r\n    }\r\n\r\n    function createMaterial(id, color) {\r\n      if (!geometryByMaterials[id]) {\r\n        const col = new Color(color.x, color.y, color.z);\r\n        const newMaterial = new MeshLambertMaterial({ color: col, side: DoubleSide });\r\n        newMaterial.onBeforeCompile = materialCustomDisplay;\r\n        newMaterial.transparent = color.w !== 1;\r\n        if (newMaterial.transparent) newMaterial.opacity = color.w;\r\n        geometryByMaterials[id] = initializeGeometryByMaterial(newMaterial);\r\n      }\r\n    }\r\n\r\n    function initializeGeometryByMaterial(newMaterial) {\r\n      return {\r\n        material: newMaterial,\r\n        geometry: [],\r\n        indices: {},\r\n        lastIndex: 0\r\n      };\r\n    }\r\n\r\n    function materialCustomDisplay(shader) {\r\n      shader.vertexShader = `\r\n\t\t\tattribute float sizes;\r\n\t\t\tattribute float r;\r\n\t\t\tattribute float g;\r\n\t\t\tattribute float b;\r\n\t\t\tattribute float a;\r\n\t\t\tattribute float h;\r\n\t\t\tvarying float vr;\r\n\t\t\tvarying float vg;\r\n\t\t\tvarying float vb;\r\n\t\t\tvarying float va;\r\n\t\t\tvarying float vh;\r\n\t\t  ${shader.vertexShader}`.replace(\r\n        `#include <fog_vertex>`,\r\n        `#include <fog_vertex>\r\n\t\t\t  vr = r;\r\n\t\t\t  vg = g;\r\n\t\t\t  vb = b;\r\n\t\t\t  va = a;\r\n\t\t\t  vh = h;\r\n\t\t\t`\r\n      );\r\n      shader.fragmentShader = `\r\n\t\t\tvarying float vr;\r\n\t\t\tvarying float vg;\r\n\t\t\tvarying float vb;\r\n\t\t\tvarying float va;\r\n\t\t\tvarying float vh;\r\n\t\t  ${shader.fragmentShader}`.replace(\r\n        `\tvec4 diffuseColor = vec4( diffuse, opacity );`,\r\n        `\r\n\t\t\t  vec4 diffuseColor = vec4( diffuse, opacity );\r\n\t\t\t  if(vh > 0.){\r\n\t\t\t\tif (va <= 0.99) discard;\r\n\t\t\t\telse diffuseColor = vec4( vr, vg, vb, opacity );\r\n\t\t\t  } \r\n\t\t\t  `\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport { IFCLoader };\r\n","import { useThree } from '@react-three/fiber';\r\nimport { useEffect, useState } from 'react';\r\nimport { Raycaster, Vector2, Vector3 } from 'three';\r\nimport { OrbitControls, Stats, PerspectiveCamera } from '@react-three/drei';\r\nimport {IFCLoader} from '../loader/IfcLoader'\r\n\r\nconst ifcLoader = new IFCLoader();\r\nifcLoader.setWasmPath('../../');\r\n\r\ntype IFCViewerProps = { mouseEvent: MouseEvent | undefined; ifcURL: string };\r\n\r\nexport function IFCViewer({ mouseEvent, ifcURL }: IFCViewerProps) {\r\n  const { camera, scene } = useThree();\r\n  const [ifcMesh, setIfcMesh] = useState<any>();\r\n  const [previousSelection, setPreviousSelection] = useState<number>();\r\n\r\n  useEffect(() => {\r\n    if (ifcURL) {\r\n      ifcLoader.load(ifcURL, (geometry: any) => {\r\n        scene.add(geometry);\r\n        setIfcMesh(geometry);\r\n      });\r\n    }\r\n  }, [ifcURL, scene]);\r\n\r\n  useEffect(() => {\r\n    function selectObject() {\r\n      const resetDisplayState = { r: 0, g: 0, b: 0, a: 1, h: 0 };\r\n      if (mouseEvent?.button !== 0) return;\r\n\r\n      const mouse = new Vector2();\r\n      mouse.x = (mouseEvent?.clientX / window.innerWidth) * 2 - 1;\r\n      mouse.y = -(mouseEvent?.clientY / window.innerHeight) * 2 + 1;\r\n\r\n      const raycaster = new Raycaster();\r\n      raycaster.setFromCamera(mouse, camera);\r\n\r\n      const intersected = raycaster.intersectObjects(scene.children);\r\n      if (intersected.length) {\r\n        if (previousSelection)\r\n          ifcLoader.setItemsVisibility([previousSelection], ifcMesh, resetDisplayState, scene);\r\n\r\n        if (ifcMesh) {\r\n          const item = ifcLoader.pickItem(intersected, ifcMesh.geometry);\r\n          const id = ifcLoader.getExpressId(Number(item.faceIndex));\r\n          setPreviousSelection(id);\r\n\r\n          const ifcProject = ifcLoader.getSpatialStructure();\r\n          console.log(ifcProject);\r\n\r\n          const properties = ifcLoader.getItemProperties(id, false, false);\r\n          console.log(properties);\r\n\r\n          const state = { r: 0, g: 0, b: 1, a: 0.2, h: 1 };\r\n          ifcLoader.setItemsVisibility([id], ifcMesh, state, scene);\r\n        }\r\n      }\r\n    }\r\n\r\n    selectObject();\r\n  }, [mouseEvent, scene, camera, ifcMesh, previousSelection]);\r\n\r\n  return (\r\n    <>\r\n      <Stats showPanel={0} className=\"stats\" />\r\n      <OrbitControls camera={camera} />\r\n      <PerspectiveCamera position={new Vector3(0, 0, 10)} />\r\n      <directionalLight color={0xffeeff} intensity={0.8} position={new Vector3(1, 1, 1)} />\r\n      <directionalLight color={0xffffff} intensity={0.8} position={new Vector3(-1, 0.5, -1)} />\r\n      <ambientLight color={0xffffee} intensity={0.25} />\r\n    </>\r\n  );\r\n}\r\n","export default \"data:image/jpeg;base64,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\"","import React from 'react';\r\nimport Logo from '../../assets/images/logo.jpg';\r\n\r\nexport const ViewData: React.FC = () => {\r\n  return (\r\n    <div>\r\n      <img \r\n        src={Logo}\r\n        alt=\"Logo A.Yoshii\"\r\n        style={{\r\n          position:'absolute',\r\n          zIndex:1,\r\n          width: '100px',\r\n          top: 30,\r\n          left: 1615\r\n        }}\r\n        />\r\n    </div>\r\n  );\r\n}\r\n\r\n","import React, { useState } from 'react';\r\nimport { Canvas } from '@react-three/fiber';\r\nimport { Color } from 'three';\r\nimport { IFCViewer, ViewData } from '../index';\r\n\r\nimport './styles.css';\r\n\r\nexport function ViewerRender() {\r\n  const [mouseEvent, setMouseEvent] = useState<any>();\r\n  const [ifcURL, setIfcUrl] = useState('');\r\n\r\n  function readIfcFile(event: any) {\r\n    if (!event) return;\r\n    const objectURL = URL.createObjectURL(event.target.files[0]);\r\n    setIfcUrl(objectURL);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <input readOnly type=\"file\" onChange={readIfcFile} id=\"openFileDialog\" />\r\n       <ViewData />\r\n      <div onDoubleClick={setMouseEvent}>\r\n        <Canvas\r\n          dpr={Math.min(window.devicePixelRatio, 2)}\r\n          gl={{ antialias: true }}\r\n          mode=\"concurrent\"\r\n          camera={{\r\n            fov: 45,\r\n            near: 0.1,\r\n            far: 1000,\r\n            position: 5,\r\n            aspect: window.innerWidth / window.innerHeight\r\n          }}\r\n          onCreated={({ scene, setSize }) => {\r\n            setSize(window.innerWidth, window.innerHeight);\r\n            scene.background = new Color('#000058');\r\n          }}\r\n        >\r\n           \r\n          <IFCViewer ifcURL={ifcURL} mouseEvent={mouseEvent} />\r\n          \r\n        </Canvas>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import React from 'react';\r\nimport {ViewerRender} from '../../../src/components/index';\r\nconst ColaborationBim: React.FC = () => {\r\n  return <ViewerRender/>;\r\n}\r\n\r\nexport default ColaborationBim;","import React from 'react';\r\nimport { BrowserRouter, Route } from 'react-router-dom';\r\nimport Home from '../src/pages/Home';\r\nimport ColaborationBim from '../src/pages/ColaborationBim';\r\n\r\n\r\nfunction Routes() {\r\n  return (\r\n    <BrowserRouter>\r\n      <Route path=\"/\" exact component={Home} />\r\n      <Route path=\"/colaboration\" component={ColaborationBim} />\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default Routes;","import React from 'react';\r\nimport Routes from './routes';\r\n\r\nfunction App() {\r\n  return (\r\n    <Routes />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { AdalConfig, AuthenticationContext, adalGetToken } from \"react-adal\";\r\n\r\n// Endpoint URL\r\nexport const endpoint = \"https://solucoesspfx.sharepoint.com\";\r\n\r\n// App Registration ID\r\nconst appId = \"1c9b6349-e135-4ae6-88c9-5e58706db31c\";\r\n\r\nexport const adalConfig: AdalConfig = {\r\n  cacheLocation: \"localStorage\",\r\n  clientId: appId,\r\n  endpoints: {\r\n    api: endpoint,\r\n  },\r\n  postLogoutRedirectUri: window.location.origin,\r\n  tenant: \"solucoesspfx.onmicrosoft.com\",\r\n};\r\n\r\nclass AdalContext {\r\n  private authContext: AuthenticationContext;\r\n  \r\n  constructor() {\r\n      this.authContext = new AuthenticationContext(adalConfig);\r\n  }\r\n\r\n  get AuthContext() {\r\n      return this.authContext;\r\n  }\r\n\r\n  public GetToken(): Promise<string | null> {\r\n      return adalGetToken(this.authContext, endpoint);\r\n  }\r\n\r\n  public LogOut() {\r\n      this.authContext.logOut();\r\n  }\r\n}\r\n\r\nconst adalContext: AdalContext = new AdalContext();\r\nexport default adalContext;\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport { sp } from '@pnp/sp';\r\nimport { runWithAdal } from 'react-adal';\r\nimport adalContext from './services/adalConfig';\r\nconst DO_NOT_LOGIN = false;\r\n\r\nrunWithAdal(adalContext.AuthContext, () => {\r\n  adalContext.GetToken()\r\n    .then(token => {\r\n      sp.setup({\r\n        sp: {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        }\r\n      });\r\n      \r\n      const rootDiv = document.getElementById('root') as HTMLElement;\r\n      ReactDOM.render(<App />, rootDiv);      \r\n    });\r\n}, DO_NOT_LOGIN);\r\n"],"sourceRoot":""}